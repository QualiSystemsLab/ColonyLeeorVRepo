# read for more details:
# https://colonysupport.quali.com/hc/en-us/articles/360026640394-Modeling-Cloud-Services-with-Terraform

spec_version: 1
kind: TerraForm
inputs:
  - VPC_ID
  - APP_PORT
  - APP_NAME
  - SOURCE_CIDR
  - AWS_REGION
  - role_arn: PowerUserAccess
  # role_arn is a default role that works out of the box in AWS,
  # It is recommended that you create a specific role with relevant permissions and provide its ARN here.

module:
  source: https://github.com/QualiSystemsLab/ColonyLeeorVRepo/tree/master/Terraform/create_alb
  # The source element is the location of your Terraform module,
  # Both public and private repos are supported

terraform_version: 1.0.6
variables:
  var_file: terraform.tfvars
  values:
    - vpc_id: $VPC_ID
    - app_name: $APP_NAME
    - app_port: $APP_PORT
    - source_cidr: $SOURCE_CIDR
    - aws_region: $AWS_REGION
outputs:        # Declaring the outputs from Terraform that will be recognized in this blueprint
  - app_url   
permissions:
  aws:
    role_arn: $role_arn    #role assumed by service
